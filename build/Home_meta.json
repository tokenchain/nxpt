{"compiler":{"version":"0.8.12+commit.f00d7308"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"uint32","name":"_localDomain","type":"uint32"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"messageHash","type":"bytes32"},{"indexed":true,"internalType":"uint256","name":"leafIndex","type":"uint256"},{"indexed":true,"internalType":"uint64","name":"destinationAndNonce","type":"uint64"},{"indexed":false,"internalType":"bytes32","name":"committedRoot","type":"bytes32"},{"indexed":false,"internalType":"bytes","name":"message","type":"bytes"}],"name":"Dispatch","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"oldRoot","type":"bytes32"},{"indexed":false,"internalType":"bytes32[2]","name":"newRoot","type":"bytes32[2]"},{"indexed":false,"internalType":"bytes","name":"signature","type":"bytes"},{"indexed":false,"internalType":"bytes","name":"signature2","type":"bytes"}],"name":"DoubleUpdate","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"oldRoot","type":"bytes32"},{"indexed":false,"internalType":"bytes32","name":"newRoot","type":"bytes32"},{"indexed":false,"internalType":"bytes","name":"signature","type":"bytes"}],"name":"ImproperUpdate","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"version","type":"uint8"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"oldUpdater","type":"address"},{"indexed":false,"internalType":"address","name":"newUpdater","type":"address"}],"name":"NewUpdater","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"updaterManager","type":"address"}],"name":"NewUpdaterManager","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint32","name":"homeDomain","type":"uint32"},{"indexed":true,"internalType":"bytes32","name":"oldRoot","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newRoot","type":"bytes32"},{"indexed":false,"internalType":"bytes","name":"signature","type":"bytes"}],"name":"Update","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"updater","type":"address"},{"indexed":true,"internalType":"address","name":"reporter","type":"address"}],"name":"UpdaterSlashed","type":"event"},{"inputs":[],"name":"MAX_MESSAGE_BODY_BYTES","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"VERSION","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"committedRoot","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"count","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint32","name":"_destinationDomain","type":"uint32"},{"internalType":"bytes32","name":"_recipientAddress","type":"bytes32"},{"internalType":"bytes","name":"_messageBody","type":"bytes"}],"name":"dispatch","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_oldRoot","type":"bytes32"},{"internalType":"bytes32[2]","name":"_newRoot","type":"bytes32[2]"},{"internalType":"bytes","name":"_signature","type":"bytes"},{"internalType":"bytes","name":"_signature2","type":"bytes"}],"name":"doubleUpdate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"homeDomainHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_oldRoot","type":"bytes32"},{"internalType":"bytes32","name":"_newRoot","type":"bytes32"},{"internalType":"bytes","name":"_signature","type":"bytes"}],"name":"improperUpdate","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IUpdaterManager","name":"_updaterManager","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"localDomain","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint32","name":"","type":"uint32"}],"name":"nonces","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_item","type":"bytes32"}],"name":"queueContains","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"queueEnd","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"queueLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"root","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_updater","type":"address"}],"name":"setUpdater","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_updaterManager","type":"address"}],"name":"setUpdaterManager","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"state","outputs":[{"internalType":"enum NomadBase.States","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"suggestUpdate","outputs":[{"internalType":"bytes32","name":"_committedRoot","type":"bytes32"},{"internalType":"bytes32","name":"_new","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"tree","outputs":[{"internalType":"uint256","name":"count","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_committedRoot","type":"bytes32"},{"internalType":"bytes32","name":"_newRoot","type":"bytes32"},{"internalType":"bytes","name":"_signature","type":"bytes"}],"name":"update","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"updater","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"updaterManager","outputs":[{"internalType":"contract IUpdaterManager","name":"","type":"address"}],"stateMutability":"view","type":"function"}],"devdoc":{"author":"Illusory Systems Inc.","events":{"Dispatch(bytes32,uint256,uint64,bytes32,bytes)":{"params":{"committedRoot":"the latest notarized root submitted in the last signed Update","destinationAndNonce":"Destination and destination-specific nonce combined in single field ((destination << 32) & nonce)","leafIndex":"Index of message's leaf in merkle tree","message":"Raw bytes of message","messageHash":"Hash of message; the leaf inserted to the Merkle tree for the message"}},"ImproperUpdate(bytes32,bytes32,bytes)":{"params":{"newRoot":"New root of the improper update","oldRoot":"Old root of the improper update","signature":"Signature on `oldRoot` and `newRoot"}},"NewUpdaterManager(address)":{"params":{"updaterManager":"The address of the new updaterManager"}},"UpdaterSlashed(address,address)":{"params":{"reporter":"The address of the entity that reported the updater misbehavior","updater":"The address of the updater"}}},"kind":"dev","methods":{"dispatch(uint32,bytes32,bytes)":{"details":"Format the message, insert its hash into Merkle tree, enqueue the new Merkle root, and emit `Dispatch` event with message information.","params":{"_destinationDomain":"Domain of destination chain","_messageBody":"Raw bytes content of message","_recipientAddress":"Address of recipient on destination chain as bytes32"}},"doubleUpdate(bytes32,bytes32[2],bytes,bytes)":{"details":"When `fail()` is called on Home, updater is slashed.","params":{"_newRoot":"Array containing two conflicting new roots","_oldRoot":"Old root shared between two conflicting updates","_signature":"Signature on `_oldRoot` and `_newRoot`[0]","_signature2":"Signature on `_oldRoot` and `_newRoot`[1]"}},"improperUpdate(bytes32,bytes32,bytes)":{"details":"Reverts (and doesn't slash updater) if signature is invalid or update not current","params":{"_newRoot":"New merkle tree root","_oldRoot":"Old merkle tree root (should equal home's committedRoot)","_signature":"Updater signature on `_oldRoot` and `_newRoot`"},"returns":{"_0":"TRUE if update was an Improper Update (implying Updater was slashed)"}},"owner()":{"details":"Returns the address of the current owner."},"renounceOwnership()":{"details":"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions anymore. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby removing any functionality that is only available to the owner."},"setUpdater(address)":{"params":{"_updater":"the new Updater"}},"setUpdaterManager(address)":{"details":"Home(s) will initially be initialized using a trusted UpdaterManager contract; we will progressively decentralize by swapping the trusted contract with a new implementation that implements Updater bonding & slashing, and rules for Updater selection & rotation","params":{"_updaterManager":"the new UpdaterManager contract"}},"suggestUpdate()":{"details":"If queue is empty, null bytes returned for both (No update is necessary because no messages have been dispatched since the last update)","returns":{"_committedRoot":"Latest root signed by the Updater","_new":"Latest enqueued Merkle root"}},"transferOwnership(address)":{"details":"Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner."},"update(bytes32,bytes32,bytes)":{"details":"emits Update eventIf _newRoot is not contained in the queue, the Update is a fraudulent Improper Update, so the Updater is slashed & Home is set to FAILED state","params":{"_committedRoot":"Current updated merkle root which the update is building off of","_newRoot":"New merkle root to update the contract state to","_signature":"Updater signature on `_committedRoot` and `_newRoot`"}}},"title":"Home","version":1},"userdoc":{"events":{"Dispatch(bytes32,uint256,uint64,bytes32,bytes)":{"notice":"Emitted when a new message is dispatched via Nomad"},"DoubleUpdate(bytes32,bytes32[2],bytes,bytes)":{"notice":"Emitted when proof of a double update is submitted, which sets the contract to FAILED state"},"ImproperUpdate(bytes32,bytes32,bytes)":{"notice":"Emitted when proof of an improper update is submitted, which sets the contract to FAILED state"},"NewUpdater(address,address)":{"notice":"Emitted when Updater is rotated"},"NewUpdaterManager(address)":{"notice":"Emitted when the UpdaterManager contract is changed"},"Update(uint32,bytes32,bytes32,bytes)":{"notice":"Emitted when update is made on Home or unconfirmed update root is submitted on Replica"},"UpdaterSlashed(address,address)":{"notice":"Emitted when the Updater is slashed (should be paired with ImproperUpdater or DoubleUpdate event)"}},"kind":"user","methods":{"count()":{"notice":"Returns the number of inserted leaves in the tree (current index)"},"dispatch(uint32,bytes32,bytes)":{"notice":"Dispatch the message it to the destination domain & recipient"},"doubleUpdate(bytes32,bytes32[2],bytes,bytes)":{"notice":"Called by external agent. Checks that signatures on two sets of roots are valid and that the new roots conflict with each other. If both cases hold true, the contract is failed and a `DoubleUpdate` event is emitted."},"homeDomainHash()":{"notice":"Hash of Home domain concatenated with \"NOMAD\""},"improperUpdate(bytes32,bytes32,bytes)":{"notice":"Check if an Update is an Improper Update; if so, slash the Updater and set the contract to FAILED state. An Improper Update is an update building off of the Home's `committedRoot` for which the `_newRoot` does not currently exist in the Home's queue. This would mean that message(s) that were not truly dispatched on Home were falsely included in the signed root. An Improper Update will only be accepted as valid by the Replica If an Improper Update is attempted on Home, the Updater will be slashed immediately. If an Improper Update is submitted to the Replica, it should be relayed to the Home contract using this function in order to slash the Updater with an Improper Update. An Improper Update submitted to the Replica is only valid while the `_oldRoot` is still equal to the `committedRoot` on Home; if the `committedRoot` on Home has already been updated with a valid Update, then the Updater should be slashed with a Double Update."},"queueContains(bytes32)":{"notice":"Returns TRUE iff `_item` is in the queue"},"queueEnd()":{"notice":"Returns last item enqueued to the queue"},"queueLength()":{"notice":"Returns number of elements in queue"},"root()":{"notice":"Calculates and returns tree's current root"},"setUpdater(address)":{"notice":"Set a new Updater"},"setUpdaterManager(address)":{"notice":"Set a new UpdaterManager contract"},"suggestUpdate()":{"notice":"Suggest an update for the Updater to sign and submit."},"update(bytes32,bytes32,bytes)":{"notice":"Submit a signature from the Updater \"notarizing\" a root, which updates the Home contract's `committedRoot`, and publishes the signature which will be relayed to Replica contracts"}},"notice":"Accepts messages to be dispatched to remote chains, constructs a Merkle tree of the messages, and accepts signatures from a bonded Updater which notarize the Merkle tree roots. Accepts submissions of fraudulent signatures by the Updater and slashes the Updater in this case.","version":1}},"settings":{"compilationTarget":{"vault/nomad/Home.sol":"Home"},"evmVersion":"london","libraries":{},"metadata":{"bytecodeHash":"ipfs"},"optimizer":{"enabled":true,"runs":10000},"remappings":[]},"sources":{"vault/interfaces/IUpdaterManager.sol":{"keccak256":"0xd100254c1e066473d303174ec14615f12122bce35bddc794c0e49d6df95ca0bc","license":"MIT OR Apache-2.0","urls":["bzz-raw://c337cc155f20c4fb126627c503e8ed7f31bf7b0e217d75d9648ca2c254325171","dweb:/ipfs/Qma4RgyFwpJN2GkR7gmJWHS9Sp9m2NwtCtSMsDnMqMQAJS"]},"vault/lib/MerkleLib.sol":{"keccak256":"0xf297da90e669fa6030407ff7218c2e78a109de7c8cd04c0d82d40d1a61a41999","license":"MIT OR Apache-2.0","urls":["bzz-raw://d272de5946822a21c77ef98b835f157424f19348c1938594019f14a3e1140f78","dweb:/ipfs/Qmac25few1VuzwzCBBwX6BoTbcXwoWNBv6Pa26EDjvb5hQ"]},"vault/lib/Message.sol":{"keccak256":"0xe0704a188b84a82fdee9bc0d2ed139649bda554e787cd8482041e262828b0b98","license":"MIT OR Apache-2.0","urls":["bzz-raw://f65535f8dd0f3707249f69befd4c74ef74b7688b578fcabf10e0817bbab409c0","dweb:/ipfs/QmeDpTVVJ4QYnhvTdJfEoXRksACw4tK6xxnZZScciEMmm7"]},"vault/lib/QueueLib.sol":{"keccak256":"0x44f62140867993d5339d1abc00b852a3e38adde65e2f9bda741ab7f3e0f178d3","license":"MIT OR Apache-2.0","urls":["bzz-raw://b5214a9d0bb39939f3d971cdc5e0f344d22884911bd4b3be0bc1945402192db3","dweb:/ipfs/QmZPrrGK4Z5mHdGC3uRMqvYtCnR94XnyudtkzseSE44ChT"]},"vault/lib/TypeCasts.sol":{"keccak256":"0xa572a0757d1408e12330f02797596e6d2315580e872cd4acd681c3ab09555b71","license":"MIT OR Apache-2.0","urls":["bzz-raw://cd9d68a1d7884e6a1f45c392e284aab3ba1e73ff2e6f0bd0fbd023b801c0fc45","dweb:/ipfs/QmVp63N9yUp7dUpnALCYpabZKtdD3ZbXGaBMsL2sn8NeB6"]},"vault/lib/TypedMemView.sol":{"keccak256":"0xaaa1d49d3ca939e49b369adcf5bf028d0d259821af57d4fa4229177eb8932936","license":"MIT OR Apache-2.0","urls":["bzz-raw://10691d24a257dc2e79cd779812c52571474239c9b1989fc63a803d5936b14fec","dweb:/ipfs/QmVERCmFdsEeuVpS2BxvJUttRaaDf6W7FjQJRFX2qnBU98"]},"vault/nomad/Home.sol":{"keccak256":"0xc9ef0ddbaadbb7546f6647a252aa230189fb37f4641aa6f0b065b603217297f7","license":"MIT OR Apache-2.0","urls":["bzz-raw://bf53197afe80c2cc2212d604a36f2d781f08652b141c9158cc43a0276a3a50b9","dweb:/ipfs/QmeEjJWY4JbmEwQ5zQVTj3secVLna14LF2BC63vptc5eaS"]},"vault/nomad/Merkle.sol":{"keccak256":"0x20a2c4d61c3b0c205e6eb1b047e037f7a37bebb75a5dc72a727969eb8ad7e586","license":"MIT OR Apache-2.0","urls":["bzz-raw://8710de867869bbaa30c99ce329ec65fa67768831ad9a0d117c3dc488b6b22376","dweb:/ipfs/QmWpocCKhaAAJzhboHgmZyGWsbAjSKAMQsa5UhDYB6LsJN"]},"vault/nomad/NomadBase.sol":{"keccak256":"0x2cb0c4eb4c499a947ed221dc7de88e0922be6509b1132b46431b0ffe0c8e2aaf","license":"MIT OR Apache-2.0","urls":["bzz-raw://7684740e712522aa97028a8c373d30ce225a756a64cdfaefb919bd1fe05999e6","dweb:/ipfs/Qmcf9QvJo9QbGkAS92DnaXemUX9XkXdEWjmkd9gQjogFoo"]},"vault/nomad/Queue.sol":{"keccak256":"0xf4ce75ed377fbbfa4489f5e3697111e90ce27e0c7fb0750fe4a03144dda46b80","license":"MIT OR Apache-2.0","urls":["bzz-raw://41604799d79065bd904cfef59af69c0d12e323ca79987bd600cba667fc04b427","dweb:/ipfs/QmbL4qCAu4FeSnq3JrsKnA9VcoikiuZocSwKYXpGtdv3qL"]},"vault/nomad/Version0.sol":{"keccak256":"0xc102ed18474a58833454fd37fc46473c88235b66cc7997aa71cad52e15314eb7","license":"MIT OR Apache-2.0","urls":["bzz-raw://4ea2a31a323f350e0976f8401602ec83fd2376d74c01e04b57d3c87ea223d269","dweb:/ipfs/QmQ7q9LZooNmRKKsVohNiLvFCkP1P78AuDs94UbbiEFaon"]},"vault/vendor/v0.8/Address.sol":{"keccak256":"0x3336baae5cf23e94274d75336e2d412193be508504aee185e61dc7d58cd05c8a","license":"MIT","urls":["bzz-raw://39a05eec7083dfa0cc7e0cbfe6cd1bd085a340af1ede93fdff3ad047c5fb3d8e","dweb:/ipfs/QmVApz5fCUq2QC8gKTsNNdCmcedJ3ETHp68zR5N3WUKS4r"]},"vault/vendor/v0.8/AddressUpgradeable.sol":{"keccak256":"0x55cf2bd9fc76704ddcdc19834cd288b7de00fc0f298a40ea16a954ae8991db2d","license":"MIT","urls":["bzz-raw://37e4df53c8d2e3c1062c1c7b2c17366db7de03bfd2559d340ca95c588aa49c2f","dweb:/ipfs/QmQ9vsG3o4wED3FRogiSUhdzJvZSjjYFtydzXvFEJtgZk4"]},"vault/vendor/v0.8/ContextUpgradeable.sol":{"keccak256":"0x741fb9edb83675bd6b0dd0aa5a267d06b54cc1b93e91ae85deadfd7f7388c9fa","license":"MIT","urls":["bzz-raw://87c2beebb42f26c7b2cf81ba77909b1f441428b4ce9b6af2a9b5d967c3725283","dweb:/ipfs/QmaFtVEJusZXw9Z1XfwxHgfVW9xMFcihHRCqxZYQS9QSTe"]},"vault/vendor/v0.8/ECDSA.sol":{"keccak256":"0x46a0a615f0e2c10c54266e72fcb5c6e726f7e94100f0e79d6ed967ffb0c6c74f","license":"MIT","urls":["bzz-raw://9defa5a8c1b084c25615b2d2a627fc14bbe6bfdb7552ce437a6de7c3ebf6c55d","dweb:/ipfs/QmWgYRyBB5jZahVXgkU7dv4rB2DZqjXYMLNWSk5UVuhXX4"]},"vault/vendor/v0.8/Initializable2.sol":{"keccak256":"0xec89b5103f4587ed7c2a8ac74c161d290b9b3117c259df962f7f86cc7e6fb017","license":"MIT","urls":["bzz-raw://a22fa5a2787ba96c5fc4d92e38e6bc1ab0f8197f96ed723264f10b66e4ea60fb","dweb:/ipfs/QmTarMFTBCvmwvn1PPA8DLBARngs9WNSdDDeASV9nPb4r4"]},"vault/vendor/v0.8/OwnableUpgradeable.sol":{"keccak256":"0x7206c9d97f58333bbc92bc81ecce6a9fa06e4df4f6cb6b21dd03356d9a80c366","license":"MIT","urls":["bzz-raw://241805ddf7e86be41a2ed1689f52c4afc6c444417233d94022ff733ad1f052fc","dweb:/ipfs/QmVJ35dZjUhtihZkNS4Jd5pM2YpsZGwber2DfV7ZJ5Xeab"]},"vault/vendor/v0.8/Strings.sol":{"keccak256":"0x391d3ba97ab6856a16b225d6ee29617ad15ff00db70f3b4df1ab5ea33aa47c9d","license":"MIT","urls":["bzz-raw://d636ba90bbbeed04a1ea7fe9ec2466757e30fd38ba2ca173636dbf69a518735e","dweb:/ipfs/QmQwCB2BHnEuYR22PYt9HkpbgeFDhq4rHmaYqAZbX3WRC7"]}},"version":1}